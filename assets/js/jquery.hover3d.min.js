!function(e){e.fn.hover3d=function(t){let s=e.extend({selector:null,perspective:1e3,sensitivity:20,invert:!1,shine:!1,hoverInClass:"hover-in",hoverOutClass:"hover-out",hoverClass:"hover-3d"},t);return this.each(function(){let t=e(this),r=t.find(s.selector);currentX=0,currentY=0,s.shine&&r.append('<div class="shine"></div>');let n=e(this).find(".shine");t.css({perspective:s.perspective+"px",transformStyle:"preserve-3d"}),r.css({perspective:s.perspective+"px",transformStyle:"preserve-3d"}),n.css({position:"absolute",top:0,left:0,bottom:0,right:0,transform:"translateZ(1px)","z-index":9}),t.on("mouseenter",function(){return r.addClass(s.hoverInClass+" "+s.hoverClass),currentX=currentY=0,void setTimeout(function(){r.removeClass(s.hoverInClass)},1e3)}),t.on("mousemove",function(e){return function(e){let t=r.innerWidth(),o=r.innerHeight(),i=Math.round(e.pageX-r.offset().left),a=Math.round(e.pageY-r.offset().top),v=s.invert?(t/2-i)/s.sensitivity:-(t/2-i)/s.sensitivity,c=s.invert?-(o/2-a)/s.sensitivity:(o/2-a)/s.sensitivity,p=i-t/2,u=a-o/2,l=180*Math.atan2(u,p)/Math.PI-90;0>l&&(l+=360),r.css({perspective:s.perspective+"px",transformStyle:"preserve-3d",transform:"rotateY("+v+"deg) rotateX("+c+"deg)"}),n.css("background","linear-gradient("+l+"deg, rgba(255,255,255,"+e.offsetY/o*.5+") 0%,rgba(255,255,255,0) 80%)")}(e)}),t.on("mouseleave",function(){return r.addClass(s.hoverOutClass+" "+s.hoverClass),r.css({perspective:s.perspective+"px",transformStyle:"preserve-3d",transform:"rotateX(0) rotateY(0)"}),void setTimeout(function(){r.removeClass(s.hoverOutClass+" "+s.hoverClass),currentX=currentY=0},1e3)})})}}(jQuery);
